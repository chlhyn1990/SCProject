<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.SCSystem.mapper.AppMapper">
	<select id="getManager" parameterType="String" resultType="com.SCSystem.dto.Manager">
		select * from manager where id=#{id}
	</select>
	<select id="getChargersFromStationIdx" parameterType="Integer" resultType="hashmap">
		select * from charger_list where station_idx=#{stationIdx}
	</select>

	<select id="getNonFixedChargerStations" parameterType="Integer" resultType="hashmap">
		SELECT DISTINCT charger_station_idx, cs.* FROM charger c JOIN charger_station cs ON c.charger_station_idx=cs.idx WHERE fixed_dt IS NULL AND cs.company_idx=#{companyIdx};
	</select>
	<select id="getFixedChargerStations" parameterType="Integer" resultType="hashmap">
		SELECT DISTINCT charger_station_idx, cs.* FROM charger c JOIN charger_station cs ON c.charger_station_idx=cs.idx WHERE fixed_dt IS NOT NULL AND cs.company_idx=#{companyIdx};
	</select>

	<update id="updateStationManager" parameterType="Integer" >
		UPDATE charger_station SET manager_idx=#{managerIdx} where idx=#{chargerStationIdx};
	</update>

	<select id="getStationFromIdx" parameterType="Integer" resultType="com.SCSystem.dto.ChargerStation">
		SELECT * from charger_station where idx=#{chargerStationIdx};
	</select>
	<select id="getDistributions" parameterType="Integer" resultType="hashmap">
		SELECT * from distribution where charger_station_idx=#{chargerStationIdx};
	</select>

</mapper>